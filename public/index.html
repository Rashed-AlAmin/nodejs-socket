<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chat app</title>
</head>
<body>
        <div id="user-list">
            <h3>Online users</h3>
            <ul id="users"></ul>
        </div>

        <div id="chat"></div>

        <form id="message-form">
            <input
            type="text"
            id="message-input"
            placeholder="enter your message"
            required
            />
            <button type="submit">send</button>
        </form>

        <script src="socket.io/socket.io.js"></script>
        <script>
            //connect to socket.io server
            const socket=io()

            const chat=document.getElementById('chat')
            const usersList=document.getElementById('users')
            const messageForm=document.getElementById('message-form')
            const messageInput=document.getElementById('message-input')

            const userName=prompt('enter your username')

            //emit an event from client side that will be listened to server side
            socket.emit('join',userName)

            socket.on('userJoined',(user)=>{
                addmessage(`${user} has joined the chat`)
            })
            
            function addmessage(input){
                const messageElement=document.createElement('div')
                messageElement.textContent=input;
                chat.appendChild(messageElement)

                //scroll to the bottom of the chat container
                chat.scrollTop=chat.scrollHeight
            }
        </script>
</body>
</html>